package cryodunere

import spice86.emulator.memory.SegmentedAddress
import spice86.emulator.function.FunctionInformation
import spice86.emulator.machine.Machine
import spice86.emulator.reverseengineer.JavaOverrideHelper

class StaticDefinitions(functionInformations: MutableMap<SegmentedAddress, FunctionInformation>, segment: Int,
  machine: Machine) : JavaOverrideHelper(functionInformations, "ida", machine) {

  init {
    defineFunctions(segment)
    defineGlobals(segment)
  }

  private fun defineFunctions(segment: Int) {
    defineFunction(segment, 0xB0, "initialize_2_ida")
    defineFunction(segment, 0xD1, "intialize_resources_ida")
    defineFunction(segment, 0x0169, "map2_resource_func_ida")
    defineFunction(segment, 0x21C, "play_intro2_ida")
    defineFunction(segment, 0x0309, "play_CREDITS_HNM_ida")
    defineFunction(segment, 0x0580, "play_intro_ida")
    defineFunction(segment, 0x61C, "load_VIRGIN_HNM_ida")
    defineFunction(segment, 0x0625, "play_VIRGIN_HNM_ida")
    defineFunction(segment, 0x64D, "load_CRYO_HNM_ida")
    defineFunction(segment, 0x0658, "load_CRYO2_HNM_ida")
    defineFunction(segment, 0x0661, "play_CRYO_OR_CRYO2_HNM_ida")
    defineFunction(segment, 0x0678, "load_PRESENT_HNM_ida")
    defineFunction(segment, 0x0684, "play_PRESENT_HNM_ida")
    defineFunction(segment, 0x69E, "load_INTRO_HNM_ida")
    defineFunction(segment, 0x6AA, "play_hnm_86_frames_ida")
    defineFunction(segment, 0x6BD, "play_hnm_skippable_ida")
    defineFunction(segment, 0x9EF, "play_CREDITS_HNM_ida")
    defineFunction(segment, 0x2D74, "open_SAL_resource_ida")
    defineFunction(segment, 0x3B59, "draw_SAL_ida")
    defineFunction(segment, 0x3BE9, "SAL_polygon_ida")
    defineFunction(segment, 0x3D83, "do_weird_shit_with_stack_buffer_ida")
    defineFunction(segment, 0x55DD, "map_func_ida")
    defineFunction(segment, 0x5E4F, "calc_SAL_index_ida")
    defineFunction(segment, 0x63F0, "map_func_qq_ida")
    defineFunction(segment, 0x739E, "map_func_ida")
    defineFunction(segment, 0xA87E, "audio_test_frequency_ida")
    defineFunction(segment, 0xA90B, "open_res_file_ida")
    defineFunction(segment, 0xA93F, "read_audio_file_ida")
    defineFunction(segment, 0xA9A1, "close_res_file_handle_ida")
    defineFunction(segment, 0xA9E7, "pcm_test_audio_done_ida")
    defineFunction(segment, 0xAA0F, "decode_sd_block_ida")
    defineFunction(segment, 0xAA70, "transfer_sd_block_qq_ida")
    defineFunction(segment, 0xAB15, "audio_start_voc_ida")
    defineFunction(segment, 0xABA3, "check_res_file_open_ida")
    defineFunction(segment, 0xABE9, "open_voc_resource_ida")
    defineFunction(segment, 0xAC14, "pcm_stop_voc_q_ida")
    defineFunction(segment, 0xAD57, "play_music_MORNING_HSQ_ida")
    defineFunction(segment, 0xAE62, "load_music_ida")
    defineFunction(segment, 0xB389, "open_sav_cl_ida")
    defineFunction(segment, 0xB427, "map_func_ida")
    defineFunction(segment, 0xB58B, "map_func_ida")
    defineFunction(segment, 0xB6C3, "map_func_ida")
    defineFunction(segment, 0xB977, "map_func_gfx_ida")
    defineFunction(segment, 0xBFE3, "map_func_ida")
    defineFunction(segment, 0xC097, "gfx_call_bp_with_front_buffer_as_screen_ida")
    defineFunction(segment, 0xC108, "transition_ida")
    defineFunction(segment, 0xC137, "load_icons_sprites_ida")
    defineFunction(segment, 0xC13E, "open_sprite_sheet_ida")
    defineFunction(segment, 0xC1BA, "hnm_apply_palette_ida")
    defineFunction(segment, 0xC22F, "draw_sprite_ida")
    defineFunction(segment, 0xC477, "gfx_copy_rect_at_si_ida")
    defineFunction(segment, 0xC49A, "gfx_copy_framebuffer_to_screen_ida")
    defineFunction(segment, 0xC4AA, "gfx_copy_rect_to_screen_ida")
    defineFunction(segment, 0xC4CD, "gfx_copy_framebuf_to_screen_ida")
    defineFunction(segment, 0xC4F0, "rect_at_si_to_regs_ida")
    defineFunction(segment, 0xC92B, "hnm_reset_and_read_header_ida")
    defineFunction(segment, 0xC93C, "hnm_read_header_ida")
    defineFunction(segment, 0xC9E8, "hnm_do_frame_skippable_ida")
    defineFunction(segment, 0xC9F4, "do_frame_and_check_if_frame_advanced_ida")
    defineFunction(segment, 0xCA01, "hnm_close_resource_ida")
    defineFunction(segment, 0xCA1B, "hnm_load_ida")
    defineFunction(segment, 0xCA60, "hnm_do_frame_ida")
    defineFunction(segment, 0xCC96, "hnm_decode_video_frame_ida")
    defineFunction(segment, 0xCD8F, "hnm_read_header_size_ida")
    defineFunction(segment, 0xCDA0, "hnm_prepare_header_read_ida")
    defineFunction(segment, 0xCE1A, "hnm_reset_ida")
    defineFunction(segment, 0xCE3B, "hnm_handle_pal_chunk_ida")
    defineFunction(segment, 0xCE6C, "initialize_memory_handler_ida")
    defineFunction(segment, 0xCEFC, "load_IRULn_HSQ_ida")
    defineFunction(segment, 0xCF1B, "play_IRULx_HSQ_ida")
    defineFunction(segment, 0xCF4B, "IRULx_draw_or_clear_subtitle_ida")
    defineFunction(segment, 0xCFA0, "check_amr_or_eng_language_ida")
    defineFunction(segment, 0xD00F, "load_PHRASExx_HSQ_ida")
    defineFunction(segment, 0xDAE3, "set_mouse_pos_ida")
    defineFunction(segment, 0xDB14, "define_mouse_range_ida")
    defineFunction(segment, 0xDB4C, "mouse_stuff_ida")
    defineFunction(segment, 0xDBB2, "call_restore_cursor_ida")
    defineFunction(segment, 0xDBEC, "draw_mouse_ida")
    defineFunction(segment, 0xDC20, "redraw_mouse_ida")
    defineFunction(segment, 0xDCE0, "read_game_port_ida")
    defineFunction(segment, 0xDD5A, "get_key_hit?_ida")
    defineFunction(segment, 0xDD63, "stc_on_user_input_ida")
    defineFunction(segment, 0xDE0C, "check_midi_ida")
    defineFunction(segment, 0xDF1E, "get_mouse_pos_etc_ida")
    defineFunction(segment, 0xE4AD, "parse_command_line_ida")
    defineFunction(segment, 0xE56B, "parse_cmd_is_end_of_arg_ida")
    defineFunction(segment, 0xE57B, "load_driver_ax_with_vtable_at_si_ida")
    defineFunction(segment, 0xE594, "initialize_ida")
    defineFunction(segment, 0xE675, "open_dune_dat_ida")
    defineFunction(segment, 0xE741, "read_dune_dat_toc_ida")
    defineFunction(segment, 0xE76A, "initialize_audio_ida")
    defineFunction(segment, 0xE8B8, "get_pit_timer_value_ida")
    defineFunction(segment, 0xE8D5, "uninitialize_memory_driver_ida")
    defineFunction(segment, 0xE913, "install_interrupt_handlers_ida")
    defineFunction(segment, 0xE97A, "initialize_mouse_ida")
    defineFunction(segment, 0xE9F4, "mouse_func_uncalled_ida")
    defineFunction(segment, 0xEA32, "initialize_joystick_ida")
    defineFunction(segment, 0xEA7B, "memory_func_qq_ida")
    defineFunction(segment, 0xEAB7, "memory_func_qq_ida")
    defineFunction(segment, 0xEC46, "call_memory_func_2_ida")
    defineFunction(segment, 0xEC59, "call_memory_func_1_ida")
    defineFunction(segment, 0xEC9C, "xms_memory_func_1_ida")
    defineFunction(segment, 0xECEC, "xms_memory_func_1_ida")
    defineFunction(segment, 0xED40, "get_ems_emm_handle_ida")
    defineFunction(segment, 0xED45, "call_ems_func_ida")
    defineFunction(segment, 0xEDB9, "map_ems_for_midi_audio_ida")
    defineFunction(segment, 0xEE02, "ems_memory_func_2_ida")
    defineFunction(segment, 0xEE46, "ems_memory_func_1_ida")
    defineFunction(segment, 0xEEA0, "initialize_himem_sys_ida")
    defineFunction(segment, 0xEF22, "call_xms_driver_func_ida")
    defineFunction(segment, 0xEF2B, "call_xms_func_on_block_ida")
    defineFunction(segment, 0xEF32, "xms_move_memory_ida")
    defineFunction(segment, 0xF05C, "reset_keyboard_ida")
    defineFunction(segment, 0xF08E, "clear_keyboard_array_ida")
    defineFunction(segment, 0xF0A0, "open_resource_force_hsq_ida")
    defineFunction(segment, 0xF0B9, "open_resource_by_index_si_ida")
    defineFunction(segment, 0xF0D6, "read_and_maybe_hsq_ida")
    defineFunction(segment, 0xF0F6, "bump_alloc_get_addr_in_di_ida")
    defineFunction(segment, 0xF0FF, "bump_allocate_bump_cx_bytes_ida")
    defineFunction(segment, 0xF11C, "alloc_cx_pages_to_di_ida")
    defineFunction(segment, 0xF13F, "allocator_attempt_to_free_space_ida")
    defineFunction(segment, 0xF1FB, "open_res_or_file_to_dx_size_ax_ida")
    defineFunction(segment, 0xF229, "open_res_or_file_or_die_ida")
    defineFunction(segment, 0xF244, "read_resource_to_esdi_ida")
    defineFunction(segment, 0xF255, "open_nonres_file_ida")
    defineFunction(segment, 0xF260, "read_ffff_to_esdi_and_close_ida")
    defineFunction(segment, 0xF2A7, "seek_dune_dat_to_res_dsdx_ida")
    defineFunction(segment, 0xF2D6, "seek_dune_dat_offset_dxax_ida")
    defineFunction(segment, 0xF2EA, "read_dune_dat_cx_to_esdi_ida")
    defineFunction(segment, 0xF2FC, "strcpy_to_filename_buf_ida")
    defineFunction(segment, 0xF314, "locate_res_by_name_dssi_ida")
    defineFunction(segment, 0xF403, "hsq_decomp_skip_header_dssi_to_esdi_ida")
  }

  private fun defineGlobals(segment: Int) {
    val vgaSegment = segment + 0x234B
    defineStaticAddress(vgaSegment, 0x01A3, "VgaOffset")
    defineStaticAddress(vgaSegment, 0x018A, "MouseCursorAddressInVram")
    defineStaticAddress(vgaSegment, 0x018C, "ColumnsOfMouseCursorCount")
    defineStaticAddress(vgaSegment, 0x018E, "LinesOfMouseCursorCount")
    defineStaticAddress(vgaSegment, 0x01BD, "PaletteLoadMode")
    defineStaticAddress(vgaSegment, 0x01A1, "NeedWaitForRetrace")
    defineStaticAddress(vgaSegment, 0x019F, "VgaStatusRegisterPort")
    defineStaticAddress(vgaSegment, 0x01A2, "VgaStatusRegisterPortExpectedRetraceValue")
    defineStaticAddress(vgaSegment, 0x1CA6, "UnknownGlobeRelated")
    defineStaticAddress(vgaSegment, 0x1CAE, "UnknownGlobeRelated")
    defineStaticAddress(vgaSegment, 0x1CB0, "UnknownGlobeRelated")
    defineStaticAddress(vgaSegment, 0x1CB2, "UnknownGlobeRelated")
    defineStaticAddress(vgaSegment, 0x1EA6, "UnknownGlobeRelated")
    defineStaticAddress(vgaSegment, 0x1F29, "UnknownGlobeRelated")
    defineStaticAddress(segment, 0xC21A, "paletteOffset")
    defineStaticAddress(segment, 0xCC94, "blitFunction")
    defineStaticAddress(segment, 0xE40C, "cmdArgList")
    defineStaticAddress(segment, 0xE8D2, "pitTimerValue")
    defineStaticAddress(segment, 0xE8D4, "pitTimerCounter")
    defineStaticAddress(segment, 0xED3A, "emsEmmHandle")
    defineStaticAddress(segment, 0xEE8A, "xmsMemoryBlock")
    defineStaticAddress(0x1138, 0x144C, "loadedSalIndex")
    defineStaticAddress(0x1138, 0x2580, "mousePosScalerX")
    defineStaticAddress(0x1138, 0x2581, "mousePosScalerY")
    defineStaticAddress(0x1138, 0x2582, "mouseCursorImageAddress")
    defineStaticAddress(0x1138, 0x2784, "resourceId")
    defineStaticAddress(0x1138, 0x2942, "cmdArgs")
    defineStaticAddress(0x1138, 0x2943, "cmdArgsMemory")
    defineStaticAddress(0x1138, 0x2944, "cmdArgsAudio")
    defineStaticAddress(0x1138, 0x3821, "resFileHandle")
    defineStaticAddress(0x1138, 0x38B5, "gfxVtable00setMode")
    defineStaticAddress(0x1138, 0x38B9, "gfxVtable01getInfoInAxCxBp")
    defineStaticAddress(0x1138, 0x38BD, "gfxVtable02")
    defineStaticAddress(0x1138, 0x38C1, "gfxVtable03drawMouseCursor")
    defineStaticAddress(0x1138, 0x38C5, "gfxVtable04restoreImageUnderMouseCursor")
    defineStaticAddress(0x1138, 0x38C9, "gfxVtable05blit")
    defineStaticAddress(0x1138, 0x38CD, "gfxVtable06")
    defineStaticAddress(0x1138, 0x38D1, "gfxVtable07")
    defineStaticAddress(0x1138, 0x38D5, "gfxVtable08fillWithZeroFor64000AtES")
    defineStaticAddress(0x1138, 0x38D9, "gfxVtable09")
    defineStaticAddress(0x1138, 0x38DD, "gfxVtable10")
    defineStaticAddress(0x1138, 0x38E1, "gfxVtable11memcpyDSToESFor64000")
    defineStaticAddress(0x1138, 0x38E5, "gfxVtable12copyRectangle")
    defineStaticAddress(0x1138, 0x38E9, "gfxVtable13copyFramebuffer")
    defineStaticAddress(0x1138, 0x38ED, "gfxVtable14copySquareOfPixelsSiIsSourceSegment")
    defineStaticAddress(0x1138, 0x38F1, "gfxVtable15memcpyDSToESFor64000")
    defineStaticAddress(0x1138, 0x38F5, "gfxVtable16copySquareOfPixels")
    defineStaticAddress(0x1138, 0x38F9, "gfxVtable17copyframebufferExplodeAndCenter")
    defineStaticAddress(0x1138, 0x38FD, "gfxVtable18")
    defineStaticAddress(0x1138, 0x3901, "gfxVtable19")
    defineStaticAddress(0x1138, 0x3905, "gfxVtable20noOp")
    defineStaticAddress(0x1138, 0x3909, "gfxVtable21setPixel")
    defineStaticAddress(0x1138, 0x390D, "gfxVtable22")
    defineStaticAddress(0x1138, 0x3911, "gfxVtable23")
    defineStaticAddress(0x1138, 0x3915, "gfxVtable24")
    defineStaticAddress(0x1138, 0x3919, "gfxVtable25")
    defineStaticAddress(0x1138, 0x391D, "gfxVtable26")
    defineStaticAddress(0x1138, 0x3921, "gfxVtable27")
    defineStaticAddress(0x1138, 0x3925, "gfxVtable28")
    defineStaticAddress(0x1138, 0x3929, "gfxVtable29")
    defineStaticAddress(0x1138, 0x392D, "gfxVtable30")
    defineStaticAddress(0x1138, 0x3931, "gfxVtable31")
    defineStaticAddress(0x1138, 0x3935, "gfxVtable32")
    defineStaticAddress(0x1138, 0x3939, "gfxVtable33updateVgaOffset01A3FromLineNumberAsAx")
    defineStaticAddress(0x1138, 0x393D, "gfxVtable34")
    defineStaticAddress(0x1138, 0x3941, "gfxVtable35")
    defineStaticAddress(0x1138, 0x3945, "gfxVtable36")
    defineStaticAddress(0x1138, 0x3949, "gfxVtable37")
    defineStaticAddress(0x1138, 0x394D, "gfxVtable38")
    defineStaticAddress(0x1138, 0x3951, "gfxVtable39")
    defineStaticAddress(0x1138, 0x3955, "gfxVtable40")
    defineStaticAddress(0x1138, 0x3959, "gfxVtable41copyPalette2toPalette1")
    defineStaticAddress(0x1138, 0x395D, "gfxVtable42")
    defineStaticAddress(0x1138, 0x3961, "gfxVtable43")
    defineStaticAddress(0x1138, 0x3965, "gfxVtable44")
    defineStaticAddress(0x1138, 0x3969, "gfxVtable45")
    defineStaticAddress(0x1138, 0x3989, "pcmVtable1")
    defineStaticAddress(0x1138, 0x398D, "pcmVtable2")
    defineStaticAddress(0x1138, 0x39A9, "xmsOrEmsMemLimit")
    defineStaticAddress(0x1138, 0x39B3, "cmdArgMidi")
    defineStaticAddress(0x1138, 0x39B7, "allocatorNextFreeOffset")
    defineStaticAddress(0x1138, 0x39B9, "allocatorNextFreeSegment")
    defineStaticAddress(0x1138, 0x3CBC, "errorMsg")
    defineStaticAddress(0x1138, 0x47F6, "salStackBuffer24b")
    defineStaticAddress(0x1138, 0xAA72, "resConditOffset")
    defineStaticAddress(0x1138, 0xAA74, "resConditSegment")
    defineStaticAddress(0x1138, 0xCE68, "allocatorLastFreeSegment")
    defineStaticAddress(0x1138, 0xCE71, "disableHsq")
    defineStaticAddress(0x1138, 0xCE78, "resourceIndex")
    defineStaticAddress(0x1138, 0xCE9A, "keyPstatus")
    defineStaticAddress(0x1138, 0xCE9D, "keyEnterStatus")
    defineStaticAddress(0x1138, 0xCE9E, "keyWstatus")
    defineStaticAddress(0x1138, 0xCEE8, "keyHit")
    defineStaticAddress(0x1138, 0xCEEA, "resetKeyboardCounter")
    defineStaticAddress(0x1138, 0xCEEB, "languageSetting")
    defineStaticAddress(0x1138, 0xDBB5, "hnmFlagMsb")
    defineStaticAddress(0x1138, 0xDBBC, "dnmajFunc2")
    defineStaticAddress(0x1138, 0xDBCE, "midiFunc5returnBx")
    defineStaticAddress(0x1138, 0xDBD0, "midiFunc5returnCx")
    defineStaticAddress(0x1138, 0xDBD6, "framebufferFront")
    defineStaticAddress(0x1138, 0xDBD8, "screenBuffer")
    defineStaticAddress(0x1138, 0xDBDA, "framebufferActive")
    defineStaticAddress(0x1138, 0xDBDE, "framebuffer2Segment")
    defineStaticAddress(0x1138, 0xDBE7, "hnmFinishedFlag")
    defineStaticAddress(0x1138, 0xDBE8, "hnmFrameCounter")
    defineStaticAddress(0x1138, 0xDBEA, "hnmCounter2")
    defineStaticAddress(0x1138, 0xDBFE, "currentHnmResourceFlag")
    defineStaticAddress(0x1138, 0xDC00, "hnmVideoId")
    defineStaticAddress(0x1138, 0xDC02, "hnmActiveVideoId")
    defineStaticAddress(0x1138, 0xDC04, "hnmFileOffset")
    defineStaticAddress(0x1138, 0xDC06, "hnmFileOffsetHi")
    defineStaticAddress(0x1138, 0xDC08, "hnmFileRemain")
    defineStaticAddress(0x1138, 0xDC0A, "hnmFileRemainHi")
    defineStaticAddress(0x1138, 0xDC0C, "hnmFileReadBufferSegment")
    defineStaticAddress(0x1138, 0xDC10, "hnmFileReadBufferOffset")
    defineStaticAddress(0x1138, 0xDC14, "videoDecodeBufferOffset")
    defineStaticAddress(0x1138, 0xDC16, "videoDecodeBufferSegment")
    defineStaticAddress(0x1138, 0xDC1C, "hnmSdBlockOffset")
    defineStaticAddress(0x1138, 0xDC1E, "hnmPlBlockOffset")
    defineStaticAddress(0x1138, 0xDC24, "videoChunkTag")
    defineStaticAddress(0x1138, 0xDC26, "pcmVocLipsyncData")
    defineStaticAddress(0x1138, 0xDC32, "framebufferBack")
    defineStaticAddress(0x1138, 0xDC36, "mousePosY")
    defineStaticAddress(0x1138, 0xDC38, "mousePosX")
    defineStaticAddress(0x1138, 0xDC42, "mouseDrawPosY")
    defineStaticAddress(0x1138, 0xDC44, "mouseDrawPosX")
    defineStaticAddress(0x1138, 0xDC46, "cursorHideCounter")
    defineStaticAddress(0x1138, 0xDC47, "cursorUnknown")
    // Whitelist only this segment as the game is browsing pointer list by incrementing segments...
    defineStaticAddress(0x1138, 0xDBB0, "spriteSheetResourcePointer", true)
    defineStaticAddress(0x1138, 0x4772, "TimeBetweenFaceZooms")
    defineStaticAddress(0x1138, 0xD82C, "CharacterXCoord")
    defineStaticAddress(0x1138, 0xD82E, "CharacterYCoord")
    defineStaticAddress(0x1138, 0x2518, "FontRelated")
    defineStaticAddress(0x1138, 0x47A0, "FontRelated")
    defineStaticAddress(0x1138, 0x2570, "MapClickHandlerAddress")
    defineStaticAddress(0x1138, 0xDC58, "MapCursorType")
    defineStaticAddress(0x1138, 0x35A6, "IsAnimateMenuUnneeded")
    defineStaticAddress(0x1138, 0xDCE6, "TransitionBitmask")
    defineStaticAddress(0x1138, 0x21DA, "OffsetToMenuType")
    defineStaticAddress(0x1138, 0x4854, "SceneSequenceOffset")
    defineStaticAddress(0x1138, 0xDBCD, "IsSoundPresent")
    defineStaticAddress(0x1138, 0x0002, "GameElapsedTime")
    defineStaticAddress(0x1138, 0xCE7A, "VideoPlayRelatedIndex")
    defineStaticAddress(0x1138, 0xDC22, "VideoPlayRelatedIndex")
  }
}